{% extends "templates/web.html" %}

{% macro email_login_body() -%}
  {% if not disable_user_pass_login or (ldap_settings and ldap_settings.enabled) %}
    {%- block navbar -%}{%- endblock -%}
    {%- block footer -%}{%- endblock -%}

    <div class="page-card-body">
      <div class="logo-wrapper">
        <img src="/assets/erptheme/images/merrix logo.png"
             alt="Login Logo"
             class="login-logo">
      </div>

      <div class="form-group">
        <div class="input-title"><p>Email or User name</p></div>
        <input type="text"
               id="login_email"
               class="form-control"
               placeholder="{% if login_name_placeholder %}{{ login_name_placeholder }}{% else %}{{ _('Please Enter Your Email or User name') }}{% endif %}"
               required
               autofocus
               autocomplete="username">
      </div>

      <div class="form-group">
        <div class="input-title"><p>Password</p></div>
        <div class="password-wrapper">
          <input type="password"
                 id="login_password"
                 class="form-control"
                 placeholder="Please Enter Your Password"
                 autocomplete="current-password"
                 required>
          <span class="toggle-password" data-toggle="login_password">
            <svg xmlns="http://www.w3.org/2000/svg"
                 viewBox="0 0 24 24"
                 fill="none"
                 stroke="currentColor"
                 stroke-width="2">
              <path d="M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5z"/>
              <circle cx="12" cy="12" r="3"/>
            </svg>
          </span>
        </div>
      </div>

      <p class="forgot-password-message">
        <a href="#forgot">{{ _("Forgot Password?") }}</a>
      </p>
    </div>
  {% endif %}

  <div class="page-card-actions">
    {% if not disable_user_pass_login %}
      <button class="btn btn-sm btn-primary btn-block btn-login" type="submit">
        {{ _("Login") }}
      </button>
    {% endif %}
  </div>
{%- endmacro %}


{% macro logo_section() %}
  <div class="page-card-head">
    <h4 class="logo-title">Merrix ERP</h4>
  </div>
{% endmacro %}


{% block head_include %}
  <link rel="stylesheet" href="/assets/erptheme/css/login.css?ver=1">
{% endblock %}


{% block page_content %}
  <div>
    <noscript><!-- No script warning --></noscript>

    <div class="background-login"></div>

    <section class="for-login">
      <div class="big-container">
        <div class="login-content page-card">
          {{ logo_section() }}
          <div class="welcome-sec">
            <span>Welcome back!</span>
            <div class="hand-icon"></div>
            <p>Please Login to your Account</p>
          </div>
          <form class="form-signin form-login" role="form">
            {{ email_login_body() }}
          </form>
        </div>
      </div>
    </section>

    <!-- Other sections -->
  </div>
{% endblock %}


{% block script %}
  <script>
    // Toggle password visibility
    document.addEventListener("DOMContentLoaded", function() {
      const toggles = document.querySelectorAll(".toggle-password");
      toggles.forEach(function(toggle) {
        toggle.addEventListener("click", function() {
          const inputId = toggle.getAttribute("data-toggle");
          const input = document.getElementById(inputId);
          if (!input) return;
          if (input.type === "password") {
            input.type = "text";
            toggle.classList.add("showing");
          } else {
            input.type = "password";
            toggle.classList.remove("showing");
          }
        });
      });
    });
  </script>
  <script>{% include "erptheme/templates/includes/login.js" %}</script>
{% endblock %}
